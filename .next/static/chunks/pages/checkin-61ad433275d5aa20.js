(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{520:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkin",function(){return s(2520)}])},2520:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(5893),l=s(7294);function r(e){let{size:t="md",className:s="",children:l,...r}=e;return(0,a.jsx)("button",{...r,className:"inline-flex rounded-full bg-gradient-to-br from-fuchsia-400 via-violet-400 to-sky-400 p-[2px] shadow-lg shadow-violet-500/30 disabled:opacity-60 ".concat(s),children:(0,a.jsx)("span",{className:"flex w-full items-center justify-center rounded-full bg-slate-950/95 ".concat("sm"===t?"px-3 py-1.5 text-xs md:text-sm":"px-4 py-2 text-sm"," font-medium text-slate-50"),children:l})})}function n(e){let{children:t,className:s="",size:l="sm",...r}=e;return(0,a.jsx)("label",{...r,className:"inline-flex cursor-pointer rounded-full bg-gradient-to-br from-fuchsia-400 via-violet-400 to-sky-400 p-[2px] shadow-lg shadow-violet-500/30 ".concat(s),children:(0,a.jsx)("span",{className:"rounded-full bg-slate-950/95 ".concat("sm"===l?"px-3 py-1.5 text-xs md:text-sm":"px-4 py-2 text-sm"," font-medium text-slate-50"),children:t})})}let o="guidewithin_checkins_v2";function i(e,t){let s=t?e.filter(e=>e.trim()!==t.trim()):e.slice();if(0===s.length)return e[0];let a=Math.floor(Math.random()*s.length);return s[a]}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,a=new AbortController,l=setTimeout(()=>a.abort(),s);try{return await fetch(e,{...t,signal:a.signal})}finally{clearTimeout(l)}}function c(e,t,s,a){var l,r,n,o,d;if(s)return i(["What symbols or feelings stood out in your dream, and what might they ask you to notice today?","If your dream were a message to your body, what would its simplest sentence be?","Which moment of the dream felt most alive, and where do you feel that sensation now?"],a);let c=(null!==(r=e.sleepScore)&&void 0!==r?r:100)<70,m=(null!==(n=e.stress)&&void 0!==n?n:0)>60,u=(null!==(o=e.steps)&&void 0!==o?o:1e4)<4e3,x=(null!==(d=e.hrv)&&void 0!==d?d:100)<35,h=[];m&&h.push("stress relief"),c&&h.push("rest"),u&&h.push("gentle movement"),x&&h.push("nervous system care");let p=null===(l=t[0])||void 0===l?void 0:l.response;return p&&p.length>40?i(["What felt most meaningful about yesterday’s note—and what’s one small step to honor it today?","What thread from yesterday do you want to carry forward, and what support would make it easy?","What single action today would respect what you discovered yesterday?"],a):i(["What does your body need most—".concat(h.join("/")||"care","—and where can you offer it?"),"What would 1% more kindness toward your body look like in the next hour?","If your breath led today, what would it ask you to soften, move, or nourish?"],a)}async function m(e,t,s,a){try{let l=await d("/api/prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:s?"dream":"day",biometrics:e,recentEntries:t.slice(0,5).map(e=>({createdAt:e.createdAt,responsePreview:e.response.slice(0,160)})),intent:"Return one concise, compassionate daily journaling question personalized to current state (~140 chars)."})},3e3);if(l&&l.ok){let r=await l.json().catch(()=>null),n=(null==r?void 0:r.prompt)||(null==r?void 0:r.question)||(null==r?void 0:r.message)||(null==r?void 0:r.result)||null;if(n&&"string"==typeof n&&n.trim()){let l=n.trim();if(a&&l===a)return c(e,t,s,a);return l}}}catch(e){}return c(e,t,s,a)}async function u(e){}function x(e){let{label:t,checked:s,onChange:l}=e;return(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs md:text-sm text-slate-200",children:[(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-500 bg-slate-900/60 text-indigo-400 focus:ring-indigo-400",checked:s,onChange:e=>l(e.target.checked)}),t]})}function h(){let e={sleepScore:72,hrv:42,stress:61,steps:3850},[t,s]=(0,l.useState)([]),[i,d]=(0,l.useState)(""),[h,f]=(0,l.useState)(!1),[b,g]=(0,l.useState)(!1),[v,j]=(0,l.useState)(!1),[w,y]=(0,l.useState)("Loading your prompt…"),[N,k]=(0,l.useState)(""),[_,S]=(0,l.useState)([]),[C,z]=(0,l.useState)(!1),[A,T]=(0,l.useState)(!1),[D,W]=(0,l.useState)(""),[L,M]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s(function(){try{let e=localStorage.getItem(o);if(!e)return[];return JSON.parse(e).sort((e,t)=>t.createdAt-e.createdAt)}catch(e){return[]}}())},[]),(0,l.useEffect)(()=>{let s=c(e,t,h,w);y(s),m(e,t,h,s).then(e=>{e&&y(e)})},[e.hrv,e.sleepScore,e.stress,e.steps,t.length,h]);let E=(0,l.useCallback)(async()=>{T(!0);try{let s=c(e,t,h,w);y(s);let a=await m(e,t,h,s);a&&y(a)}finally{T(!1)}},[e,t,h,w]),I=(0,l.useCallback)(async(e,t)=>{if(!e)return;let s=Array.from(e).slice(0,8),a=[];for(let e of s){if("image"===t&&!e.type.startsWith("image/")||"audio"===t&&!e.type.startsWith("audio/"))continue;let s=await function(e){return new Promise((t,s)=>{let a=new FileReader;a.onload=()=>t(a.result),a.onerror=s,a.readAsDataURL(e)})}(e);a.push({id:"".concat(Date.now(),"_").concat(e.name,"_").concat(Math.random().toString(36).slice(2)),kind:t,dataUrl:s,name:e.name})}S(e=>[...a,...e])},[]),P=(0,l.useCallback)(async()=>{if(!N.trim()){alert("Please write your reflection before saving.");return}let e={id:"".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2)),createdAt:Date.now(),isDream:h,sacredLocked:b,shareToCommunity:v,prompt:w,response:N.trim(),media:_};try{z(!0);let a=[e,...t];s(a),localStorage.setItem(o,JSON.stringify(a)),await u(e),k(""),S([])}finally{z(!1)}},[t,h,b,v,w,N,_]),R=(0,l.useMemo)(()=>new Date().toLocaleDateString(),[]),O=(0,l.useMemo)(()=>{if(!i.trim())return t;let e=i.toLowerCase();return t.filter(t=>[t.response,t.prompt].some(t=>t.toLowerCase().includes(e)))},[t,i]);return(0,a.jsxs)("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-b from-slate-950 via-slate-950 to-slate-900 text-slate-100",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 -z-10 flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-[130vh] w-[130vh] rounded-full bg-[radial-gradient(circle_at_center,_rgba(244,114,182,0.45),_rgba(129,140,248,0.3),_rgba(56,189,248,0.15),_transparent_70%)] blur-3xl"})}),(0,a.jsx)("div",{className:"pointer-events-none absolute -left-32 top-0 -z-10 h-64 w-64 rounded-full bg-fuchsia-500/15 blur-3xl"}),(0,a.jsx)("div",{className:"pointer-events-none absolute -right-20 bottom-10 -z-10 h-72 w-72 rounded-full bg-sky-500/15 blur-3xl"}),(0,a.jsxs)("div",{className:"relative z-10 mx-auto max-w-5xl px-4 pb-24 pt-8 md:px-8",children:[(0,a.jsxs)("header",{className:"mb-8 flex flex-col gap-2 md:flex-row md:items-end md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-500",children:"Check-In"}),(0,a.jsx)("h1",{className:"mt-1 text-3xl font-semibold text-slate-50 md:text-4xl",children:"Check-In"}),(0,a.jsxs)("p",{className:"mt-3 max-w-2xl text-sm text-slate-300",children:["Daily reflections weaving dreams, body cues, and gentle prompts — your soft landing pad. Today • ",R]})]}),(0,a.jsxs)("div",{className:"mt-3 text-right md:mt-0",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"From Within"}),(0,a.jsx)("p",{className:"bg-gradient-to-r from-violet-300 via-fuchsia-300 to-sky-300 bg-clip-text text-sm font-semibold text-transparent",children:"Journals \xb7 Dreams \xb7 Threads"})]})]}),(0,a.jsxs)("section",{className:"mb-6 grid gap-4 md:grid-cols-[minmax(0,2.1fr)_minmax(0,1.4fr)]",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-3xl border border-slate-800 bg-slate-950/80 p-5 shadow-[0_24px_80px_rgba(0,0,0,0.8)]",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute -left-20 top-0 h-40 w-40 rounded-full bg-fuchsia-500/12 blur-3xl"}),(0,a.jsx)("div",{className:"pointer-events-none absolute -right-10 bottom-0 h-40 w-40 rounded-full bg-sky-500/12 blur-3xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-slate-400",children:h?"Dream Prompt":"Guided Prompt"}),(0,a.jsx)("p",{className:"mt-1 text-base leading-snug text-slate-50 md:text-lg",children:w})]}),(0,a.jsx)(r,{type:"button",size:"sm",onClick:E,disabled:A,children:A?"Refreshing…":"New prompt"})]}),(0,a.jsx)("textarea",{className:"mt-4 w-full resize-y rounded-2xl border border-slate-700 bg-slate-950/80 p-3 text-sm text-slate-100 outline-none placeholder:text-slate-500 focus:border-violet-400 focus:ring-1 focus:ring-violet-400",rows:6,placeholder:h?"Record your dream symbols, feelings, scenes…":"Write freely…",value:N,onChange:e=>k(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-3xl border border-slate-800 bg-slate-950/80 p-5 shadow-[0_24px_80px_rgba(0,0,0,0.8)]",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute -right-16 top-0 h-40 w-40 rounded-full bg-emerald-500/12 blur-3xl"}),(0,a.jsx)("div",{className:"pointer-events-none absolute -left-10 bottom-0 h-40 w-40 rounded-full bg-violet-500/12 blur-3xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Modes & Boundaries"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-200",children:"Shape how today's check-in is held."}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-3",children:[(0,a.jsx)(x,{label:"Dream Journal mode",checked:h,onChange:f}),(0,a.jsx)(x,{label:"Sacred Space lock ☥",checked:b,onChange:g}),(0,a.jsx)(x,{label:"Share excerpt to Community",checked:v,onChange:j})]})]})]})]}),(0,a.jsxs)("section",{className:"mb-6 relative overflow-hidden rounded-3xl border border-slate-800 bg-slate-950/80 p-5 shadow-[0_20px_70px_rgba(0,0,0,0.75)]",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute -left-16 top-0 h-40 w-40 rounded-full bg-amber-500/12 blur-3xl"}),(0,a.jsx)("div",{className:"pointer-events-none absolute -right-12 bottom-0 h-52 w-52 rounded-full bg-sky-500/12 blur-3xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Media Attachments"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-200",children:"Crystals, progress pics, or a quick voice note."}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[(0,a.jsxs)(n,{size:"sm",children:["Add photos",(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:e=>I(e.target.files,"image")})]}),(0,a.jsxs)(n,{size:"sm",children:["Add voice note",(0,a.jsx)("input",{type:"file",accept:"audio/*",multiple:!0,className:"hidden",onChange:e=>I(e.target.files,"audio")})]})]}),_.length>0?(0,a.jsx)("div",{className:"mt-3 grid grid-cols-3 gap-3 sm:grid-cols-4",children:_.map(e=>(0,a.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-slate-700 bg-slate-950/80",children:["image"===e.kind?(0,a.jsx)("img",{src:e.dataUrl,alt:e.name||"attachment",className:"h-28 w-full object-cover"}):(0,a.jsx)("audio",{className:"w-full",controls:!0,src:e.dataUrl}),(0,a.jsx)("button",{title:"Remove",onClick:()=>{var t;return t=e.id,void S(e=>e.filter(e=>e.id!==t))},className:"absolute right-2 top-2 hidden rounded-full bg-black/80 px-2 py-1 text-[0.65rem] text-white group-hover:block",children:"Remove"})]},e.id))}):(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-400",children:"Nothing added yet. Optional, but powerful for tracking patterns."})]})]}),(0,a.jsxs)("section",{className:"mb-6 grid gap-4 md:grid-cols-[minmax(0,1.6fr)_minmax(0,1.4fr)]",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-3xl border border-slate-800 bg-slate-950/80 p-5 shadow-[0_20px_70px_rgba(0,0,0,0.75)]",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute -left-16 top-0 h-40 w-40 rounded-full bg-rose-500/12 blur-3xl"}),(0,a.jsx)("div",{className:"pointer-events-none absolute -right-10 bottom-0 h-40 w-40 rounded-full bg-sky-500/12 blur-3xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Save Today"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-200",children:"Capture this moment and tuck it into your archive."}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[(0,a.jsx)(r,{type:"button",onClick:P,disabled:C,children:C?"Saving…":"Save Check-In"}),(0,a.jsx)(r,{type:"button",size:"sm",onClick:()=>{k(""),S([])},children:"Clear"}),(0,a.jsx)(r,{type:"button",size:"sm",onClick:()=>M(!0),children:"View Trends"})]})]})]}),(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-3xl border border-slate-800 bg-slate-950/80 p-5 shadow-[0_20px_70px_rgba(0,0,0,0.75)]",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute -right-16 top-0 h-40 w-40 rounded-full bg-violet-500/12 blur-3xl"}),(0,a.jsx)("div",{className:"pointer-events-none absolute -left-10 bottom-0 h-40 w-40 rounded-full bg-emerald-500/12 blur-3xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Search Archive"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-200",children:"Look back through themes, phrases, and seasons of you."}),(0,a.jsx)("div",{className:"mt-4 flex items-center gap-2",children:(0,a.jsx)("input",{type:"text",placeholder:'Try: "breath", "sleep", "gratitude"',value:i,onChange:e=>d(e.target.value),className:"w-full rounded-full border border-slate-800 bg-slate-950/80 px-4 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-violet-400 focus:ring-1 focus:ring-violet-400"})})]})]})]}),(0,a.jsxs)("section",{className:"relative overflow-hidden rounded-3xl border border-slate-800 bg-slate-950/80 p-5 shadow-[0_24px_80px_rgba(0,0,0,0.8)]",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute -left-20 top-0 h-40 w-40 rounded-full bg-sky-500/10 blur-3xl"}),(0,a.jsx)("div",{className:"pointer-events-none absolute -right-16 bottom-0 h-48 w-48 rounded-full bg-fuchsia-500/10 blur-3xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-100",children:"Recent Check-Ins"}),0===O.length?(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-400",children:"No entries yet."}):(0,a.jsx)("ul",{className:"mt-3 space-y-3",children:O.map(e=>(0,a.jsxs)("li",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-[0.7rem] text-slate-400",children:new Date(e.createdAt).toLocaleString()}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[0.7rem] text-slate-200",children:[e.isDream&&(0,a.jsx)("span",{className:"rounded-full border border-slate-600 px-2 py-0.5",children:"Dream"}),e.sacredLocked&&(0,a.jsx)("span",{className:"rounded-full border border-slate-600 px-2 py-0.5",children:"☥ Locked"}),e.shareToCommunity&&(0,a.jsx)("span",{className:"rounded-full border border-slate-600 px-2 py-0.5",children:"Shared"})]})]}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-slate-100",children:[(0,a.jsx)("span",{className:"font-medium",children:"Q: "}),e.prompt]}),(0,a.jsxs)("p",{className:"mt-1 whitespace-pre-wrap text-sm text-slate-100",children:[(0,a.jsx)("span",{className:"font-medium",children:"A: "}),e.response]}),e.media&&e.media.length>0&&(0,a.jsx)("div",{className:"mt-2 grid grid-cols-3 gap-2 sm:grid-cols-4",children:e.media.map(e=>"image"===e.kind?(0,a.jsx)("img",{src:e.dataUrl,alt:e.name||"attachment",className:"h-20 w-full rounded-xl object-cover"},e.id):(0,a.jsx)("audio",{className:"w-full",controls:!0,src:e.dataUrl},e.id))})]},e.id))})]})]})]}),L&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"relative max-h-[85vh] w-full max-w-xl overflow-auto rounded-3xl border border-slate-800 bg-slate-950/95 p-5 shadow-[0_30px_100px_rgba(0,0,0,0.95)]",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute -left-16 top-0 h-40 w-40 rounded-full bg-violet-500/18 blur-3xl"}),(0,a.jsx)("div",{className:"pointer-events-none absolute -right-10 bottom-0 h-40 w-40 rounded-full bg-sky-500/18 blur-3xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-50",children:"Search & Trends"}),(0,a.jsx)(r,{type:"button",size:"sm",onClick:()=>M(!1),children:"Close"})]}),(0,a.jsx)(p,{entries:t})]})]})})]})}function p(e){var t;let{entries:s}=e,l=s.map(e=>e.response).join(" ").toLowerCase().split(/\W+/).filter(Boolean),r=new Set(["the","a","and","to","of","in","for","on","is","i","it","that","this","with","my","me","at","was","are","be","an"]),n=new Map;for(let e of l)r.has(e)||n.set(e,(null!==(t=n.get(e))&&void 0!==t?t:0)+1);let o=[...n.entries()].sort((e,t)=>t[1]-e[1]).slice(0,15);return(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-100",children:"Top words"}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:o.map(e=>{let[t,s]=e;return(0,a.jsxs)("span",{className:"rounded-full border border-slate-600 bg-slate-950/80 px-2 py-0.5 text-slate-100",children:[t," • ",s]},t)})}),(0,a.jsx)("p",{className:"mt-2 text-xs text-slate-400",children:"Use search on the main screen to filter entries by any of these."})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=520)}),_N_E=e.O()}]);