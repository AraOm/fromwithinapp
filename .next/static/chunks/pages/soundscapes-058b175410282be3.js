(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{1511:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/soundscapes",function(){return t(4329)}])},1134:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(7294);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter((e,n,t)=>!!e&&t.indexOf(e)===n).join(" ")};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,r.forwardRef)((e,n)=>{let{color:t="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:c,className:o="",children:u,iconNode:d,...m}=e;return(0,r.createElement)("svg",{ref:n,...l,width:a,height:a,stroke:t,strokeWidth:c?24*Number(s)/Number(a):s,className:i("lucide",o),...m},[...d.map(e=>{let[n,t]=e;return(0,r.createElement)(n,t)}),...Array.isArray(u)?u:[u]])}),c=(e,n)=>{let t=(0,r.forwardRef)((t,l)=>{let{className:c,...o}=t;return(0,r.createElement)(s,{ref:l,iconNode:n,className:i("lucide-".concat(a(e)),c),...o})});return t.displayName="".concat(e),t}},4329:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var r=t(5893),a=t(7294),i=t(1134);let l=(0,i.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),s=(0,i.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),c=(0,i.Z)("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),o=[{id:"rain",url:"/soundscapes/ambience/rain.mp3",gain:.7},{id:"wind",url:"/soundscapes/ambience/wind.mp3",gain:.55},{id:"bowl",url:"/soundscapes/ambience/bowl_c3.mp3",gain:.5},{id:"birds",url:"/soundscapes/birds/birds.mp3",gain:.6}],u={Grounding:[{id:"rain",gain:.75},{id:"bowl",gain:.55},{id:"wind",gain:.45}],Relaxation:[{id:"bowl",gain:.6},{id:"birds",gain:.4},{id:"wind",gain:.5}],Focus:[{id:"bowl",gain:.48},{id:"rain",gain:.6},{id:"wind",gain:.4}],Sleep:[{id:"rain",gain:.7},{id:"wind",gain:.5},{id:"bowl",gain:.45}]};function d(e,n){let t=[...e],r=[];for(let e=0;e<Math.min(n,t.length);e++){let e=Math.floor(Math.random()*t.length);r.push(t.splice(e,1)[0])}return r}function m(){let e=(0,a.useRef)(null),n=(0,a.useRef)({}),t=(0,a.useRef)({}),i=(0,a.useRef)({}),[m,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),[g,w]=(0,a.useState)([]),[b,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{let n=!0;return(async()=>{let r=new(window.AudioContext||window.webkitAudioContext);e.current=r;let a=o.map(async e=>{try{let n=await fetch(e.url,{cache:"force-cache"}),a=await n.arrayBuffer(),i=await r.decodeAudioData(a);t.current[e.id]=i}catch(n){console.warn("Failed to load",e.url,n)}});await Promise.race([Promise.allSettled(a),new Promise(e=>setTimeout(e,2200))]),n&&h(!0)})(),()=>{var t;n=!1,v(),null===(t=e.current)||void 0===t||t.close()}},[]);let y=e=>{let n=Object.fromEntries(o.map(e=>[e.id,e]));return u[e].map(e=>{var t;let r=n[e.id];return{...r,gain:null!==(t=e.gain)&&void 0!==t?t:r.gain}}).filter(Boolean)},N=async()=>{let n=e.current;"suspended"===n.state&&await n.resume();let t=null!=b?y(b):g.length?g:d(o,3);w(t),k(t)},k=r=>{v();let a=e.current;r.forEach((e,r)=>{let l=t.current[e.id];if(!l)return;let s=a.createBufferSource();s.buffer=l,s.loop=!0;let c=a.createGain();c.gain.value=1e-4,s.connect(c).connect(a.destination),s.start(0,.7*r%(l.duration||1)),i.current[e.id]=s,n.current[e.id]=c,c.gain.linearRampToValueAtTime(e.gain,a.currentTime+.9)}),f(!0)},v=()=>{let t=e.current;t&&(Object.values(n.current).forEach(e=>{e.gain.cancelScheduledValues(t.currentTime),e.gain.linearRampToValueAtTime(1e-4,t.currentTime+.4)}),setTimeout(()=>{Object.values(i.current).forEach(e=>e.stop()),n.current={},i.current={}},450),f(!1))},j=(0,a.useMemo)(()=>["Grounding","Relaxation","Focus","Sleep"],[]);return(0,r.jsxs)("main",{className:"mx-auto max-w-screen-md px-4 pb-24 pt-6",children:[(0,r.jsx)("header",{className:"mb-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Soundscapes"})}),(0,r.jsxs)("section",{className:"rounded-2xl border p-4 bg-white",children:[(0,r.jsxs)("div",{className:"mb-3 flex flex-wrap gap-2",children:[j.map(e=>(0,r.jsx)("button",{onClick:()=>{x(e);let n=y(e);w(n),p&&k(n)},className:["rounded-full border px-4 py-2 text-sm hover:bg-gray-50 transition",b===e?"bg-gray-100 border-gray-400":"bg-white"].join(" "),children:e},e)),(0,r.jsx)("button",{onClick:()=>x(null),className:"rounded-full border px-4 py-2 text-sm hover:bg-gray-50 bg-white",children:"Any"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsx)("button",{disabled:!m,onClick:p?v:N,className:"rounded-full border px-5 py-2.5 text-sm font-medium hover:bg-gray-50 disabled:opacity-50",children:p?(0,r.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,r.jsx)(l,{className:"h-4 w-4"})," Pause"]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,r.jsx)(s,{className:"h-4 w-4"})," Begin Ritual"]})}),(0,r.jsx)("button",{disabled:!m,onClick:()=>{let e=null!=b?y(b):d(o,3);w(e),p&&k(e)},className:"rounded-full border px-3.5 py-2 text-sm hover:bg-gray-50 disabled:opacity-50",children:(0,r.jsx)(c,{className:"h-4 w-4"})})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1511)}),_N_E=e.O()}]);