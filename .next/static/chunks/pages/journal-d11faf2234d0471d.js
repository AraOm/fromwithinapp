(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{1197:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/journal",function(){return l(114)}])},2602:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{default:function(){return n},noSSR:function(){return i}});let a=l(8754);l(5893),l(7294);let o=a._(l(5491));function r(e){return{default:(null==e?void 0:e.default)||e}}function i(e,t){return delete t.webpack,delete t.modules,e(t)}function n(e,t){let l=o.default,a={loading:e=>{let{error:t,isLoading:l,pastDelay:a}=e;return null}};e instanceof Promise?a.loader=()=>e:"function"==typeof e?a.loader=e:"object"==typeof e&&(a={...a,...e});let n=(a={...a,...t}).loader;return(a.loadableGenerated&&(a={...a,...a.loadableGenerated},delete a.loadableGenerated),"boolean"!=typeof a.ssr||a.ssr)?l({...a,loader:()=>null!=n?n().then(r):Promise.resolve(r(()=>null))}):(delete a.webpack,delete a.modules,i(l,a))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1159:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return a}});let a=l(8754)._(l(7294)).default.createContext(null)},5491:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return m}});let a=l(8754)._(l(7294)),o=l(1159),r=[],i=[],n=!1;function d(e){let t=e(),l={loading:!0,loaded:null,error:null};return l.promise=t.then(e=>(l.loading=!1,l.loaded=e,e)).catch(e=>{throw l.loading=!1,l.error=e,e}),l}class s{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function u(e){return function(e,t){let l=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),r=null;function d(){if(!r){let t=new s(e,l);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!n){let e=l.webpack?l.webpack():l.modules;e&&i.push(t=>{for(let l of e)if(t.includes(l))return d()})}function u(e,t){!function(){d();let e=a.default.useContext(o.LoadableContext);e&&Array.isArray(l.modules)&&l.modules.forEach(t=>{e(t)})}();let i=a.default.useSyncExternalStore(r.subscribe,r.getCurrentValue,r.getCurrentValue);return a.default.useImperativeHandle(t,()=>({retry:r.retry}),[]),a.default.useMemo(()=>{var t;return i.loading||i.error?a.default.createElement(l.loading,{isLoading:i.loading,pastDelay:i.pastDelay,timedOut:i.timedOut,error:i.error,retry:r.retry}):i.loaded?a.default.createElement((t=i.loaded)&&t.default?t.default:t,e):null},[e,i])}return u.preload=()=>d(),u.displayName="LoadableComponent",a.default.forwardRef(u)}(d,e)}function c(e,t){let l=[];for(;e.length;){let a=e.pop();l.push(a(t))}return Promise.all(l).then(()=>{if(e.length)return c(e,t)})}u.preloadAll=()=>new Promise((e,t)=>{c(r).then(e,t)}),u.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let l=()=>(n=!0,t());c(i,e).then(l,l)})),window.__NEXT_PRELOADREADY=u.preloadReady;let m=u},114:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return p}});var a=l(5893),o=l(7294),r=l(5152),i=l.n(r);let n=[{id:"p1",text:"What energy are you carrying today?",category:"daily"},{id:"p2",text:"Where did you feel resistance in your body?",category:"body"},{id:"p3",text:"What emotion is most present right now?",category:"emotion"},{id:"p4",text:"What symbols or scenes appeared in your dream?",category:"dream"}],d=["✨ uplifted","\uD83D\uDE42 okay","\uD83D\uDE10 neutral","\uD83D\uDE15 low","\uD83D\uDE1E heavy"],s=["Root","Sacral","Solar Plexus","Heart","Throat","Third Eye","Crown"],u=["calm","anxious","angry","sad","grateful","tired","excited","grounded"],c=["head","throat","chest","solar_plexus","belly","hips","legs","feet"];function m(e){let{active:t,onClick:l,children:o}=e;return(0,a.jsx)("button",{type:"button",onClick:l,className:["px-3 py-1 rounded-full border text-sm transition",t?"bg-black text-white border-black":"bg-white text-gray-700 border-gray-300 hover:border-gray-500"].join(" "),children:o})}function v(){var e,t,l,r;let[i,v]=(0,o.useState)(()=>(function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:"",createdAt:0,updatedAt:0,kind:null!==(e=t.kind)&&void 0!==e?e:"journal",text:"",visibility:"private",locked:!1,...t}})()),[p,h]=(0,o.useState)(!1);(0,o.useEffect)(()=>{h(!0),v(e=>{var t,l,a,o,r,i,n;return{...e,id:null!==(a=null===(l=globalThis.crypto)||void 0===l?void 0:null===(t=l.randomUUID)||void 0===t?void 0:t.call(l))&&void 0!==a?a:"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8)),createdAt:Date.now(),updatedAt:Date.now(),kind:null!==(o=e.kind)&&void 0!==o?o:"journal",visibility:null!==(r=e.visibility)&&void 0!==r?r:"private",tags:null!==(i=e.tags)&&void 0!==i?i:{chakras:[],emotions:[],body:[],keywords:[]},media:null!==(n=e.media)&&void 0!==n?n:[]}})},[]);let f=null!==(r=null===(e=i.prompt)||void 0===e?void 0:e.id)&&void 0!==r?r:"",y=(0,o.useMemo)(()=>n,[]),x=(e,t)=>{let l=e?[...e]:[],a=l.findIndex(e=>e===t);return a>=0?l.splice(a,1):l.push(t),l};function b(e,t){v(l=>({...l,["before"===e?"moodBefore":"moodAfter"]:t,updatedAt:Date.now()}))}async function g(e){var t,l,a;if(!e||!p)return;let o=e[0];if(!o)return;let r=await new Promise((e,t)=>{let l=new FileReader;l.onerror=()=>t(Error("Failed to read file")),l.onload=()=>e(String(l.result)),l.readAsDataURL(o)}),i={id:null!==(a=null===(l=globalThis.crypto)||void 0===l?void 0:null===(t=l.randomUUID)||void 0===t?void 0:t.call(l))&&void 0!==a?a:"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8)),kind:"image",dataUrl:r,storageUrl:void 0,caption:o.name};v(e=>{var t;return{...e,media:[...null!==(t=e.media)&&void 0!==t?t:[],i],updatedAt:Date.now()}})}async function j(){console.log("Saving JournalEntry:",i),alert("Saved locally (console). Connect Supabase insert next.")}return p?(0,a.jsxs)("div",{className:"p-6 max-w-2xl mx-auto",children:[(0,a.jsxs)("header",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Journal"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Speak or type your check-in; we’ll save it privately on your device."})]}),(0,a.jsxs)("section",{className:"rounded-2xl border border-gray-200 p-4 md:p-6 bg-white shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("button",{type:"button",onClick:function(){alert("Voice input coming soon — we’ll auto-transcribe and attach audio.")},className:"px-4 py-2 rounded-xl border border-gray-300 bg-white hover:bg-gray-50",children:"\uD83C\uDFA4 Voice"}),(0,a.jsx)("button",{type:"button",onClick:j,className:"px-5 py-2 rounded-xl bg-black text-white font-medium",children:"Save entry"}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Share to Community"}),(0,a.jsx)("input",{type:"checkbox",checked:"community"===i.visibility,onChange:function(){v(e=>({...e,visibility:"community"===e.visibility?"private":"community",sharedToCommunity:"community"!==e.visibility,updatedAt:Date.now()}))},className:"h-4 w-4"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Guided prompt"}),(0,a.jsxs)("select",{value:f,onChange:e=>(function(e){let t=y.find(t=>t.id===e);v(e=>({...e,prompt:t?{id:t.id,text:t.text,category:t.category}:void 0,updatedAt:Date.now()}))})(e.target.value),className:"w-full rounded-xl border border-gray-300 px-3 py-2 bg-white",children:[(0,a.jsx)("option",{value:"",children:"— None —"}),y.map(e=>(0,a.jsx)("option",{value:e.id,children:e.text},e.id))]}),(null===(t=i.prompt)||void 0===t?void 0:t.text)?(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:i.prompt.text}):null]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("textarea",{value:i.text,onChange:e=>v(t=>({...t,text:e.target.value,updatedAt:Date.now()})),placeholder:"Talk or type what’s present for you…",rows:8,className:"w-full rounded-2xl border border-gray-300 px-4 py-3 outline-none focus:ring-2 focus:ring-gray-300"})}),(0,a.jsxs)("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"Mood before"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map(e=>(0,a.jsx)(m,{active:i.moodBefore===e,onClick:()=>b("before",e),children:e},"before-".concat(e)))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"Mood after"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map(e=>(0,a.jsx)(m,{active:i.moodAfter===e,onClick:()=>b("after",e),children:e},"after-".concat(e)))})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"Chakras"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>{var t,l;return(0,a.jsx)(m,{active:null===(l=i.tags)||void 0===l?void 0:null===(t=l.chakras)||void 0===t?void 0:t.includes(e),onClick:()=>{v(t=>{var l,a,o,r,i,n,d;return{...t,tags:{...t.tags,chakras:x(null===(l=t.tags)||void 0===l?void 0:l.chakras,e),emotions:null!==(i=null===(a=t.tags)||void 0===a?void 0:a.emotions)&&void 0!==i?i:[],body:null!==(n=null===(o=t.tags)||void 0===o?void 0:o.body)&&void 0!==n?n:[],keywords:null!==(d=null===(r=t.tags)||void 0===r?void 0:r.keywords)&&void 0!==d?d:[]},updatedAt:Date.now()}})},children:e},e)})})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"Emotions"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map(e=>{var t,l;return(0,a.jsx)(m,{active:null===(l=i.tags)||void 0===l?void 0:null===(t=l.emotions)||void 0===t?void 0:t.includes(e),onClick:()=>{v(t=>{var l,a,o,r,i,n,d;return{...t,tags:{...t.tags,chakras:null!==(i=null===(l=t.tags)||void 0===l?void 0:l.chakras)&&void 0!==i?i:[],emotions:x(null===(a=t.tags)||void 0===a?void 0:a.emotions,e),body:null!==(n=null===(o=t.tags)||void 0===o?void 0:o.body)&&void 0!==n?n:[],keywords:null!==(d=null===(r=t.tags)||void 0===r?void 0:r.keywords)&&void 0!==d?d:[]},updatedAt:Date.now()}})},children:e},e)})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"Body areas"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:c.map(e=>{var t,l;return(0,a.jsx)(m,{active:null===(l=i.tags)||void 0===l?void 0:null===(t=l.body)||void 0===t?void 0:t.includes(e),onClick:()=>{v(t=>{var l,a,o,r,i,n,d;return{...t,tags:{...t.tags,chakras:null!==(i=null===(l=t.tags)||void 0===l?void 0:l.chakras)&&void 0!==i?i:[],emotions:null!==(n=null===(a=t.tags)||void 0===a?void 0:a.emotions)&&void 0!==n?n:[],body:x(null===(o=t.tags)||void 0===o?void 0:o.body,e),keywords:null!==(d=null===(r=t.tags)||void 0===r?void 0:r.keywords)&&void 0!==d?d:[]},updatedAt:Date.now()}})},children:e.replace("_"," ")},e)})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"Attach image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>g(e.target.files)}),!!(null===(l=i.media)||void 0===l?void 0:l.length)&&(0,a.jsx)("div",{className:"mt-3 grid grid-cols-3 gap-3",children:i.media.map(e=>{var t,l,o;return"image"===e.kind?(0,a.jsxs)("figure",{className:"rounded-xl overflow-hidden border",children:[(0,a.jsx)("img",{src:null!==(l=null!==(t=e.dataUrl)&&void 0!==t?t:e.storageUrl)&&void 0!==l?l:"",alt:null!==(o=e.caption)&&void 0!==o?o:"",className:"w-full h-28 object-cover"}),e.caption&&(0,a.jsx)("figcaption",{className:"text-xs p-1 text-gray-600",children:e.caption})]},e.id):null})})]})]})]}):(0,a.jsxs)("div",{className:"p-6 max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Journal"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Speak or type your check-in; we’ll save it privately on your device."}),(0,a.jsx)("div",{className:"h-64 rounded-2xl border border-gray-200 bg-gray-50"})]})}var p=i()(()=>Promise.resolve(v),{ssr:!1})},5152:function(e,t,l){e.exports=l(2602)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1197)}),_N_E=e.O()}]);